<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Server Setup &mdash; QCFractal 0+untagged.1.g522c5ba documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Manager Setup" href="setup_compute.html" />
    <link rel="prev" title="Setup Overview" href="setup_quickstart.html" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> QCFractal
          </a>
              <div class="version">
                0+untagged.1.g522c5ba
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Install QCFractal</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup_quickstart.html">Setup Overview</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Server Setup</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#using-the-command-line">Using the Command Line</a></li>
<li class="toctree-l2"><a class="reference internal" href="#within-a-python-script">Within a Python Script</a></li>
<li class="toctree-l2"><a class="reference internal" href="#within-a-jupyter-notebook">Within a Jupyter Notebook</a></li>
<li class="toctree-l2"><a class="reference internal" href="#full-server-config-settings">Full Server Config Settings</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="setup_compute.html">Manager Setup</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Records Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="results.html">Results</a></li>
<li class="toctree-l1"><a class="reference internal" href="procedures.html">Procedures</a></li>
<li class="toctree-l1"><a class="reference internal" href="services.html">Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="flow.html">Fractal Call Flowcharts</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Manager Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="managers.html">Fractal Queue Managers</a></li>
<li class="toctree-l1"><a class="reference internal" href="managers_config_api.html">Queue Manager API</a></li>
<li class="toctree-l1"><a class="reference internal" href="managers_hpc.html">Configuration for High-Performance Computing</a></li>
<li class="toctree-l1"><a class="reference internal" href="managers_samples.html">Queue Manager Example YAML Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="managers_faq.html">Queue Manager Frequent Questions and Issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="managers_detailed.html">Detailed Manager Information</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Server CLI and Configuration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="server_init.html">Fractal Server Init</a></li>
<li class="toctree-l1"><a class="reference internal" href="server_config.html">Fractal Server Config</a></li>
<li class="toctree-l1"><a class="reference internal" href="server_start.html">Fractal Server Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="server_user.html">Fractal Server User</a></li>
<li class="toctree-l1"><a class="reference internal" href="server_upgrade.html">Fractal Server Upgrade</a></li>
<li class="toctree-l1"><a class="reference internal" href="server_view.html">Server-side Dataset Views</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="qcarchive_overview.html">QCArchive Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">QCFractal API</a></li>
<li class="toctree-l1"><a class="reference internal" href="database_design.html">Database Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev_guidelines.html">Development Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">QCFractal</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Server Setup</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/setup_server.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="server-setup">
<h1>Server Setup<a class="headerlink" href="#server-setup" title="Permalink to this headline"></a></h1>
<p>A  <code class="docutils literal notranslate"><span class="pre">qcfractal-server</span></code> instance contains a record of all results, task queue,
and collection information and provides an interface to all FractalClients
and <code class="docutils literal notranslate"><span class="pre">qcfractal-manager</span></code>s. All data is stored in a PostgreSQL database which is often
handled transparently. A server
instance should be run on hardware that is for long periods stable (not
shutdown often),  accessible from both compute resources and users via HTTP,
and have access to permanent storage.  This location is often either research
groups local computers, a supercomputer with  appropriately allocated
resources for this task, or the cloud.</p>
<section id="using-the-command-line">
<h2>Using the Command Line<a class="headerlink" href="#using-the-command-line" title="Permalink to this headline"></a></h2>
<p>The command line is used for <code class="docutils literal notranslate"><span class="pre">qcfractal-server</span></code> instances that are long-term
data storage and task distribution engines. To begin, a <code class="docutils literal notranslate"><span class="pre">qcfractal-server</span></code>
is first initialized using the command line:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">&gt;&gt;&gt; qcfractal-server init</span>
</pre></div>
</div>
<p>This initialization will create <code class="docutils literal notranslate"><span class="pre">~/.qca/qcfractal</span></code> folder (which can be
altered) which contains default specifications for the <code class="docutils literal notranslate"><span class="pre">qcfractal-server</span></code>
and for the underlying PostgreSQL database. The <code class="docutils literal notranslate"><span class="pre">qcfractal-server</span> <span class="pre">init</span>
<span class="pre">--help</span></code> CLI command will describe all parameterizations of this folder. In
addition to the specification information, a new PostgreSQL database will be
initialized and started in the background. The background PostgreSQL database
consumes virtually no resources when not in use and should not interfere with
your system.</p>
<p>Once a <code class="docutils literal notranslate"><span class="pre">qcfractal-server</span></code> instance is initialized the server can then be run
with the <code class="docutils literal notranslate"><span class="pre">start</span></code> command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">&gt;&gt;&gt; qcfractal-server start</span>
</pre></div>
</div>
<p>The QCFractal server is now ready to accept new connections.</p>
</section>
<section id="within-a-python-script">
<h2>Within a Python Script<a class="headerlink" href="#within-a-python-script" title="Permalink to this headline"></a></h2>
<p>Canonical workflows can be run from a Python script using the <code class="docutils literal notranslate"><span class="pre">FractalSnowflake</span></code>
instance. With default options a <code class="docutils literal notranslate"><span class="pre">FractalSnowflake</span></code> will spin up a fresh database which
will be removed after shutdown.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>All data inside a <code class="docutils literal notranslate"><span class="pre">FractalSnowflake</span></code> is temporary and will be deleted when the
<code class="docutils literal notranslate"><span class="pre">FractalSnowflake</span></code> shuts down.</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">qcfractal</span> <span class="kn">import</span> <span class="n">FractalSnowflake</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">server</span> <span class="o">=</span> <span class="n">FractalSnowflake</span><span class="p">()</span>

<span class="go"># Obtain a FractalClient to the server</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">client</span> <span class="o">=</span> <span class="n">server</span><span class="o">.</span><span class="n">client</span><span class="p">()</span>
</pre></div>
</div>
<p>A standard <code class="docutils literal notranslate"><span class="pre">FractalServer</span></code> cannot be started in a Python script and then interacted with
as a <code class="docutils literal notranslate"><span class="pre">FractalServer</span></code> uses asynchronous programming by default. <code class="docutils literal notranslate"><span class="pre">FractalServer.stop</span></code> will
stop the script.</p>
</section>
<section id="within-a-jupyter-notebook">
<h2>Within a Jupyter Notebook<a class="headerlink" href="#within-a-jupyter-notebook" title="Permalink to this headline"></a></h2>
<p>Due to the way Jupyter Notebooks work an interactive server needs to take a different approach
than the canonical Python script. To manipulate a server in a Jupyter Notebook a
<code class="docutils literal notranslate"><span class="pre">FractalSnowflakeHandler</span></code> can be used much in the same way as a <code class="docutils literal notranslate"><span class="pre">FractalSnowflake</span></code>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>All data inside a <code class="docutils literal notranslate"><span class="pre">FractalSnowflakeHandler</span></code> is temporary and will be deleted when the
<code class="docutils literal notranslate"><span class="pre">FractalSnowflakeHandler</span></code> shuts down.</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">qcfractal</span> <span class="kn">import</span> <span class="n">FractalSnowflakeHandler</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">server</span> <span class="o">=</span> <span class="n">FractalSnowflakeHandler</span><span class="p">()</span>

<span class="go"># Obtain a FractalClient to the server</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">client</span> <span class="o">=</span> <span class="n">server</span><span class="o">.</span><span class="n">client</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="full-server-config-settings">
<h2>Full Server Config Settings<a class="headerlink" href="#full-server-config-settings" title="Permalink to this headline"></a></h2>
<p>The full CLI and configs for the Fractal Server can be found on the following pages:</p>
<ul class="simple">
<li><p>Fractal Server Config file: <a class="reference internal" href="server_config.html"><span class="doc">Fractal Server Config</span></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">qcfractal-server</span> <span class="pre">init</span></code>: <a class="reference internal" href="server_init.html"><span class="doc">Fractal Server Init</span></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">qcfractal-server</span> <span class="pre">start</span></code>: <a class="reference internal" href="server_start.html"><span class="doc">Fractal Server Start</span></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">qcfractal-server</span> <span class="pre">upgrade</span></code>: <a class="reference internal" href="server_upgrade.html"><span class="doc">Fractal Server Upgrade</span></a></p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="setup_quickstart.html" class="btn btn-neutral float-left" title="Setup Overview" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="setup_compute.html" class="btn btn-neutral float-right" title="Manager Setup" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2018-2021, The Molecular Sciences Software Institute.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>